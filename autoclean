#!/bin/sh

# delete files generated by GNU automake toolchain

if [ -f "Makefile" ] || [ -f "GNUmakefile" ]; then
	(make distclean || make clean) || true
fi

if [ -f "configure.ac" ]; then
	rm -vf "configure" "config.guess" "config.log" "config.status" "config.sub"
	rm -vf "compile" "depcomp" "install-sh" "ltmain.sh" "missing" "test-driver"
	rm -rvf "autom4te.cache"
fi

if [ "$(head -n1 aclocal.m4 2>/dev/null | grep 'generated automatically')" ]; then
	rm -vf aclocal.m4
fi

configheader="$(grep 'AM_CONFIG_HEADER' configure.ac | sed 's/AM_CONFIG_HEADER//; s/(//; s/\[//; s/)//; s/\]//;')"
rm -vf "${configheader}" "${configheader}.in" "${configheader}.in~"

configauxdir="$(grep 'AC_CONFIG_AUX_DIR' configure.ac | sed 's/AC_CONFIG_AUX_DIR//; s/(//; s/\[//; s/)//; s/\]//;')"
rm -rvf "${configauxdir}"

Makefiles="$(find  -name "Makefile.am" -type f -printf "%p ")"
rm -vf `echo "$Makefiles " | sed 's/.am /.in /g'`
rm -vf `echo "$Makefiles " | sed 's/.am / /g'`

Infiles="$(find . -name "*.in" -type f -printf "%p ")"
rm -vf `echo "$Infiles " | sed 's/.in / /g'`

